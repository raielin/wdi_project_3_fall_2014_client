"use strict";var stopInApp=angular.module("stopInApp",["ep"]);stopInApp.controller("MainCtrl",["$scope",function(a){a.stopIn={showError:function(a){toastr.error(a)}}}]),angular.module("ep",[]).directive("stopIn",["$window","$parse",function(a,b){var c=0,d="__ep_stopIn_";return{restrict:"A",replace:!1,templateUrl:"/views/stopin.html",link:function(e,f,g){function h(){function a(a,c){if(c==google.maps.DirectionsStatus.OK){g.setDirections(a);var d=a.routes[0].bounds;b(d)}else angular.isFunction(l.showError)&&e.$apply(function(){l.showError(c)})}function b(a){var b={bounds:a,keyword:l.placeSelect};h=new google.maps.InfoWindow;var d=new google.maps.places.PlacesService(f);d.nearbySearch(b,c)}function c(a,b){b==google.maps.places.PlacesServiceStatus.OK&&d(a)}function d(a){var b=new google.maps.LatLngBounds;e.places=a;for(var c,d=0;c=a[d];d++){var g=new google.maps.Marker({map:f,title:c.name,position:c.geometry.location});google.maps.event.addListener(g,"click",function(){h.setContent(c.name),h.open(f,this)}),b.extend(c.geometry.location)}f.fitBounds(b)}var f,g,h,i=new google.maps.DirectionsService,j=[{featureType:"landscape.man_made",stylers:[{saturation:17},{lightness:47},{hue:"#f600ff"}]},{featureType:"landscape.natural.landcover",stylers:[{saturation:29},{lightness:30},{color:"#e6f0f0"}]},{featureType:"landscape.natural.terrain",stylers:[{hue:"#ff0000"},{saturation:11},{lightness:-8},{color:"#80b280"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{saturation:-28},{color:"#dd8080"},{lightness:21}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#8ccce0"},{saturation:-20},{lightness:24}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#80b4ad"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#809dad"},{saturation:21},{lightness:55}]}],k=new google.maps.StyledMapType(j,{name:"Styled Map"}),m=new google.maps.LatLng(42.358992,-71.061019),n={zoom:15,center:m,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};f=new google.maps.Map(document.getElementById("map-canvas"),n),f.mapTypes.set("map_style",k),f.setMapTypeId("map_style");var o={draggable:!0,map:f};g=new google.maps.DirectionsRenderer(o),g.setMap(f),g.setPanel(document.getElementById("steps")),l.getDirections=function(){var b={origin:l.origin,destination:l.destination,provideRouteAlternatives:!0,travelMode:google.maps.TravelMode.DRIVING,optimizeWaypoints:!0};i.route(b,a)},l.getDirections()}function i(){var b=d+ ++c;a[b]=h;var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https":"http")+"://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&callback="+b,e.type="text/javascript",e.async="true";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f)}var j=b(g.stopIn),k=j.assign,l=e.stopIn;k(e,l),a.google&&a.google.maps?h():i()}}}]);